<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Financeiro - Análise</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body class="dashboard-page">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>FinDash</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-chart-bar"></i>
                <span>Relatórios</span>
            </a>
            <a href="#" class="nav-item">
                <i class="fas fa-wallet"></i>
                <span>Finanças</span>
            </a>
            <a href="#map" class="nav-item" id="mapLink">
                <i class="fas fa-map-marked-alt"></i>
                <span>Mapa de Regiões</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <a href="index.html" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sair</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1>Dashboard Financeiro</h1>
            </div>
            
            <div class="header-right">
                <div class="header-controls">
                    <!-- Date Filter -->
                    <div class="date-filter">
                        <i class="fas fa-calendar-alt"></i>
                        <select id="dateRange" class="date-select">
                            <option value="7">Últimos 7 dias</option>
                            <option value="30" selected>Últimos 30 dias</option>
                            <option value="90">Últimos 3 meses</option>
                            <option value="180">Últimos 6 meses</option>
                            <option value="365">Último ano</option>
                            <option value="custom">Personalizado</option>
                        </select>
                    </div>
                    
                    <!-- Custom Date Picker (hidden by default) -->
                    <div class="custom-date-picker" id="customDatePicker" style="display: none;">
                        <input type="date" id="startDate" class="date-input">
                        <span>até</span>
                        <input type="date" id="endDate" class="date-input">
                        <button class="apply-date-btn" id="applyDateFilter">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>
                    
                    <!-- Theme Selector -->
                    <div class="theme-selector">
                        <button class="theme-btn" id="themeToggle">
                            <i class="fas fa-palette"></i>
                        </button>
                        <div class="theme-dropdown" id="themeDropdown">
                            <div class="theme-option" data-theme="dark">
                                <div class="theme-preview dark-preview"></div>
                                <span>Dark Mode</span>
                            </div>
                            <div class="theme-option" data-theme="blue">
                                <div class="theme-preview blue-preview"></div>
                                <span>Ocean Blue</span>
                            </div>
                            <div class="theme-option" data-theme="purple">
                                <div class="theme-preview purple-preview"></div>
                                <span>Purple Dream</span>
                            </div>
                            <div class="theme-option" data-theme="green">
                                <div class="theme-preview green-preview"></div>
                                <span>Forest Green</span>
                            </div>
                            <div class="theme-option" data-theme="red">
                                <div class="theme-preview red-preview"></div>
                                <span>Ruby Red</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications -->
                    <button class="notification-btn" id="notificationBtn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                </div>
                
                <div class="date-time">
                    <i class="fas fa-clock"></i>
                    <span id="currentDate"></span>
                </div>
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=Admin&background=6366f1&color=fff" alt="User">
                    <span>Admin</span>
                </div>
            </div>
        </header>

        <!-- KPI Cards -->
        <section class="kpi-section">
            <div class="kpi-card kpi-revenue">
                <div class="kpi-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="kpi-content">
                    <h3>Receita Total</h3>
                    <p class="kpi-value" id="totalRevenue">R$ 0</p>
                    <span class="kpi-change positive">
                        <i class="fas fa-arrow-up"></i> 12.5%
                    </span>
                </div>
            </div>
            
            <div class="kpi-card kpi-profit">
                <div class="kpi-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="kpi-content">
                    <h3>Lucro Líquido</h3>
                    <p class="kpi-value" id="netProfit">R$ 0</p>
                    <span class="kpi-change positive">
                        <i class="fas fa-arrow-up"></i> 8.3%
                    </span>
                </div>
            </div>
            
            <div class="kpi-card kpi-expenses">
                <div class="kpi-icon">
                    <i class="fas fa-receipt"></i>
                </div>
                <div class="kpi-content">
                    <h3>Despesas</h3>
                    <p class="kpi-value" id="totalExpenses">R$ 0</p>
                    <span class="kpi-change negative">
                        <i class="fas fa-arrow-down"></i> 3.2%
                    </span>
                </div>
            </div>
            
            <div class="kpi-card kpi-growth">
                <div class="kpi-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="kpi-content">
                    <h3>Taxa de Crescimento</h3>
                    <p class="kpi-value" id="growthRate">0%</p>
                    <span class="kpi-change positive">
                        <i class="fas fa-arrow-up"></i> 15.7%
                    </span>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="chart-card chart-large">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-area"></i> Receita vs Despesas</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-download"></i></button>
                        <button class="chart-btn"><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="revenueExpenseChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-pie"></i> Distribuição de Custos</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-download"></i></button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="costDistributionChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Map Section -->
        <section class="map-section">
            <div class="map-card">
                <div class="chart-header">
                    <h3><i class="fas fa-map-marker-alt"></i> Lucro por Região</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-sync-alt"></i></button>
                        <button class="chart-btn"><i class="fas fa-expand"></i></button>
                    </div>
                </div>
                <div id="map" class="map-container"></div>
                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-color high"></span>
                        <span>Alto Lucro (&gt; R$ 500K)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color medium"></span>
                        <span>Médio Lucro (R$ 200K - R$ 500K)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color low"></span>
                        <span>Baixo Lucro (&lt; R$ 200K)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Additional Charts -->
        <section class="charts-section">
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-bar"></i> Performance Mensal</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-download"></i></button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="monthlyPerformanceChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-line"></i> Tendência de Crescimento</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-download"></i></button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="growthTrendChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Transaction Table -->
        <section class="table-section">
            <div class="table-card">
                <div class="chart-header">
                    <h3><i class="fas fa-table"></i> Últimas Transações</h3>
                    <div class="chart-actions">
                        <button class="chart-btn"><i class="fas fa-filter"></i></button>
                        <button class="chart-btn"><i class="fas fa-download"></i></button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="data-table" id="transactionsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Data</th>
                                <th>Descrição</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsBody">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Alerts Section -->
        <section class="alerts-section">
            <div class="alerts-card">
                <div class="chart-header">
                    <h3><i class="fas fa-exclamation-triangle"></i> Alertas e Notificações</h3>
                </div>
                <div class="alerts-list" id="alertsList">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p>© 2025 Todos os Direitos Reservados por <strong>Davi Mustafa</strong></p>
        </footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
